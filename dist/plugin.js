(()=>{"use strict";const e={filename:"design-tokens",extension:".tokens.json",nameConversion:"default",tokenFormat:"standard",compression:!1,urlJsonCompression:!0,serverUrl:void 0,eventType:"update-tokens",accessToken:void 0,acceptHeader:"application/vnd.github.everest-preview+json",contentType:"text/plain;charset=UTF-8",authType:"token",reference:"main",exclusionPrefix:"",excludeExtensionProp:!1,alias:"alias, ref, reference",keyInName:!1,prefixInName:!0,modeInTokenValue:!1,modeInTokenName:!1,resolveSameCollectionOrModeReference:!1,prefix:{color:"color",gradient:"gradient",typography:"typography",font:"font",effect:"effect",grid:"grid",border:"border, borders",breakpoint:"breakpoint, breakpoints",radius:"radius, radii",size:"size, sizes",spacing:"spacing",motion:"motion",opacity:"opacity, opacities"},exports:{color:!0,gradient:!0,font:!0,typography:!0,effect:!0,grid:!0,border:!0,breakpoint:!0,radius:!0,size:!0,spacing:!0,motion:!0,opacity:!0,variables:!0}},t={ui:{generalSettings:{width:550,height:836},export:{width:550,height:356},urlExport:{width:550,height:650}},key:{lastVersionSettingsOpened:"lastVersionSettingsOpened",fileId:"fileId",settings:"settings",extensionPluginData:"org.lukasoppermann.figmaDesignTokens",extensionFigmaStyleId:"styleId",extensionVariableStyleId:"variableId",extensionAlias:"alias",authType:{token:"token",gitlabToken:"gitlab_token",gitlabCommit:"gitlab_commit",basic:"Basic",bearer:"Bearer"}},exclusionPrefixDefault:["_","."],fileExtensions:[{label:".tokens.json",value:".tokens.json"},{label:".tokens",value:".tokens"},{label:".json",value:".json"}]},n=(e,t=!0)=>!0===t?JSON.stringify(e):JSON.stringify(e,null,2),i=(e,t)=>Object.fromEntries(Object.entries(e).map(([n,i])=>void 0!==i&&typeof t[n]!=typeof i?[n,e[n]]:[n,t[n]]));var o=function(e,t,n,i){return new(n||(n=Promise))(function(o,a){function r(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}l((i=i.apply(e,t||[])).next())})};const a={generalSettings:"generalSettings",export:"export",sendSettings:"sendSettings",urlExport:"urlExport",help:"help",demo:"demo",openUrl:"openUrl",reset:"reset",saveSettings:"saveSettings",closePlugin:"closePlugin"},r="6.11.3";const s=e=>{return n=void 0,i=void 0,a=function*(){const n=yield e.clientStorage.getAsync(t.key.lastVersionSettingsOpened),i=((e,t="1.0.0")=>{const[n,i,o]=t.split("."),[a,r,s]=e.split(".");return n<a?"major":i<r?"minor":o<s?"patch":void 0})(r,n);return n&&n===r||(yield e.clientStorage.setAsync(t.key.lastVersionSettingsOpened,r)),i},new((o=void 0)||(o=Promise))(function(e,t){function r(e){try{l(a.next(e))}catch(e){t(e)}}function s(e){try{l(a.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o(function(e){e(n)})).then(r,s)}l((a=a.apply(n,i||[])).next())});var n,i,o,a},l=e=>{let n=e.root.getPluginData(t.key.fileId);return void 0!==n&&""!==n||(e.root.setPluginData(t.key.fileId,e.root.name+" "+Math.floor(1e9*Math.random())),n=e.root.getPluginData(t.key.fileId)),n},u="color",c="gradient",p="font",d="effect",f="grid",g="border",y="breakpoint",m="radius",v="size",x="spacing",b="motion",h="opacity",S="variables",k=(e,t=2)=>{if(void 0===e)return;if("number"!=typeof e||"number"!=typeof t)throw new Error(`Invalid parameters, both value "${e}" (${typeof e}) and decimalPlaces "${t}" (${typeof t}) must be of type number`);const n=Math.pow(10,t);return Math.round(e*n)/n},A=(e,t)=>{var n;return{r:k(255*e.r,0),g:k(255*e.g,0),b:k(255*e.b,0),a:k(null!==(n=null!=t?t:e.a)&&void 0!==n?n:1)}},E=e=>"SOLID"===e.type&&!0===e.visible?A(e.color,e.opacity):null,O={fill:{value:{r:0,g:0,b:0,a:0},type:"color",blendMode:"normal"}},I=e=>e?{[t.key.extensionAlias]:e}:{},R={GRADIENT_LINEAR:"linear",GRADIENT_RADIAL:"radial",GRADIENT_ANGULAR:"angular",GRADIENT_DIAMOND:"diamond"},T=([[e,t],[n,i]])=>{const o=Math.atan2(i-t,n-e)*(180/Math.PI)+315;return o>360?o-360:o},w=(e,n)=>e.reduce((e,i)=>{const o=i.paints.filter(e=>"IMAGE"!==e.type);if(i.paints.length&&0===o.length)return e;i.paints=o;const{alias:a,description:r}=((e="",t)=>{t=t&&0!==t.filter(e=>e).length?t:["Ref:"];const n=new RegExp("("+t.join("|").toLowerCase()+"):?\\s");let i;const o=e.split(/\r?\n/).filter(e=>!e.toLowerCase().match(n)||(i=e.toLowerCase().replace(n,"").trim(),!1));return{alias:i,description:o.join("\n")}})(i.description,n.alias),s=(l=i.paints[0],["GRADIENT_LINEAR","GRADIENT_RADIAL","GRADIENT_ANGULAR","GRADIENT_DIAMOND"].includes(null==l?void 0:l.type));var l;const p=i.paints.length?i.paints.map(e=>(e=>{var t;return"SOLID"===e.type?{fill:{value:E(e),type:"color",blendMode:(null===(t=e.blendMode)||void 0===t?void 0:t.toLowerCase())||"normal"}}:["GRADIENT_LINEAR","GRADIENT_RADIAL","GRADIENT_ANGULAR","GRADIENT_DIAMOND"].includes(e.type)?{gradientType:{value:R[e.type],type:"string"},rotation:{value:T(e.gradientTransform),type:"number",unit:"degree"},stops:e.gradientStops.map(e=>({position:{value:k(e.position),type:"number"},color:{value:A(e.color),type:"color"}})),opacity:{value:k(e.opacity),type:"number"}}:null})(e)):[O];return[...e,{name:`${s?n.gradient[0]:n.color[0]}/${i.name}`,category:s?"gradient":"color",exportKey:s?c:u,description:r,values:p,extensions:{[t.key.extensionPluginData]:Object.assign({[t.key.extensionFigmaStyleId]:i.id,exportKey:s?c:u},I(a))}}]},[]),L=(e,n)=>e.filter(e=>e.layoutGrids.length>0).map(e=>({name:`${n[0]}/${e.name}`,category:"grid",exportKey:f,description:e.description||null,values:e.layoutGrids.map(e=>"GRID"===e.pattern?(e=>({pattern:{value:e.pattern.toLowerCase(),type:"string"},sectionSize:{value:e.sectionSize,unit:"pixel",type:"number"}}))(e):(e=>{return Object.assign(Object.assign(Object.assign({pattern:{value:e.pattern.toLowerCase(),type:"string"}},void 0!==e.sectionSize&&{sectionSize:{value:e.sectionSize,unit:"pixel",type:"number"}}),{gutterSize:{value:e.gutterSize,unit:"pixel",type:"number"},alignment:{value:e.alignment.toLowerCase(),type:"string"},count:(t=e.count,t===1/0?{value:"auto",type:"string"}:{value:t,type:"number"})}),void 0!==e.offset&&{offset:{value:e.offset,unit:"pixel",type:"number"}});var t})(e)),extensions:{[t.key.extensionPluginData]:{[t.key.extensionFigmaStyleId]:e.id,exportKey:f}}})),N={NONE:"none",UNDERLINE:"underline",STRIKETHROUGH:"line-through"},C={ORIGINAL:"none",UPPER:"uppercase",LOWER:"lowercase",TITLE:"capitalize",SMALL_CAPS:"small-caps"},D={100:100,thin:100,w1:100,200:200,w2:200,extralight:200,ultralight:200,extraleicht:200,300:300,light:300,leicht:300,w3:300,400:400,normal:400,regular:400,buch:400,w4:400,500:500,medium:500,kraeftig:500,kräftig:500,w5:500,600:600,semibold:600,demibold:600,halbfett:600,w6:600,700:700,bold:700,dreiviertelfett:700,w7:700,800:800,extrabold:800,ultabold:800,fett:800,w8:800,900:900,black:900,heavy:900,super:900,extrafett:900,w9:900},P={normal:"normal",condensed:"condensed",expanded:"expanded",extended:"expanded"},j={normal:"normal",italic:"italic",kursiv:"italic",oblique:"oblique"},_=e=>{const t=e.toLowerCase().split(" ");let n=t[0];return["extra","ultra","semi","demi"].includes(t[0])&&["bold","light"].includes(t[1])&&(n=`${t[0]}${t[1]}`),D[n]||400},M=e=>{const t=e.toLowerCase().split(" ");return P[t[t.length-1]]||P[t[t.length-2]]||"normal"},z=e=>{const t=e.toLowerCase().split(" ").pop();return j[t]||"normal"},B=(e,n)=>e.map(e=>({name:`${n[0]}/${e.name}`,category:"font",exportKey:p,description:e.description||void 0,values:{fontSize:{value:e.fontSize,unit:"pixel",type:"number"},textDecoration:{value:N[e.textDecoration],type:"string"},fontFamily:{value:e.fontName.family,type:"string"},fontWeight:{value:_(e.fontName.style),type:"number"},fontStyle:{value:z(e.fontName.style),type:"string"},fontStretch:{value:M(e.fontName.style),type:"string"},_fontStyleOld:{value:e.fontName.style,type:"string"},letterSpacing:{value:k(e.letterSpacing.value),unit:"pixels"===e.letterSpacing.unit.toLowerCase()?"pixel":e.letterSpacing.unit.toLowerCase(),type:"number"},lineHeight:{value:k(e.lineHeight.value)||"normal",unit:"pixels"===e.lineHeight.unit.toLowerCase()?"pixel":e.lineHeight.unit.toLowerCase(),type:Object.prototype.hasOwnProperty.call(e.lineHeight,"value")?"number":"string"},paragraphIndent:{value:e.paragraphIndent,unit:"pixel",type:"number"},paragraphSpacing:{value:e.paragraphSpacing,unit:"pixel",type:"number"},textCase:{value:C[e.textCase]||"none",type:"string"}},extensions:{[t.key.extensionPluginData]:{[t.key.extensionFigmaStyleId]:e.id,exportKey:p}}})),U={LAYER_BLUR:"layerBlur",BACKGROUND_BLUR:"backgroundBlur",DROP_SHADOW:"dropShadow",INNER_SHADOW:"innerShadow"},G=(e,n)=>e.filter(e=>e.effects.length>0).map(e=>({name:`${n[0]}/${e.name}`,category:"effect",exportKey:d,description:e.description||null,values:e.effects.map(e=>"LAYER_BLUR"===e.type||"BACKGROUND_BLUR"===e.type?(e=>({effectType:{value:U[e.type],type:"string"},radius:{value:e.radius,unit:"pixel",type:"number"}}))(e):(e=>({effectType:{value:U[e.type],type:"string"},radius:{value:e.radius,unit:"pixel",type:"number"},color:{value:A(e.color),type:"color"},offset:{x:{value:e.offset.x,unit:"pixel",type:"number"},y:{value:e.offset.y,unit:"pixel",type:"number"}},spread:{value:e.spread,unit:"pixel",type:"number"}}))(e)),extensions:{[t.key.extensionPluginData]:{[t.key.extensionFigmaStyleId]:e.id,exportKey:d}}})),K=e=>t=>{if(!Array.isArray(e))return;const n=t.name.substr(0,t.name.indexOf("/")).replace(/\s+/g,"");return 0!==n.length?e.includes(n):void 0},$=e=>{if(Object.prototype.hasOwnProperty.call(e,"direction"))return{direction:{value:e.direction.toLowerCase(),type:"string"}}},F={CUSTOM_CUBIC_BEZIER:{type:"custom-cubicBezier",curveType:"cubicBezier",easing:void 0},CUSTOM_SPRING:{type:"custom-spring",curveType:"spring",easing:void 0},LINEAR:{type:"linear",curveType:"cubicBezier",easing:{x1:0,y1:0,x2:1,y2:1}},EASE_IN:{type:"ease-in",curveType:"cubicBezier",easing:{x1:.41999998688697815,y1:0,x2:1,y2:1}},EASE_OUT:{type:"ease-out",curveType:"cubicBezier",easing:{x1:0,y1:0,x2:.5799999833106995,y2:1}},EASE_IN_AND_OUT:{type:"ease-in-out",curveType:"cubicBezier",easing:{x1:.41999998688697815,y1:0,x2:.5799999833106995,y2:1}},EASE_IN_BACK:{type:"ease-in-back",curveType:"cubicBezier",easing:{x1:.30000001192092896,y1:-.05000000074505806,x2:.699999988079071,y2:-.5}},EASE_OUT_BACK:{type:"ease-out-back",curveType:"cubicBezier",easing:{x1:.44999998807907104,y1:1.4500000476837158,x2:.800000011920929,y2:1}},EASE_IN_AND_OUT_BACK:{type:"ease-in-out-back",curveType:"cubicBezier",easing:{x1:.699999988079071,y1:-.4000000059604645,x2:.4000000059604645,y2:1.399999976158142}},BOUNCY:{type:"bouncy",curveType:"spring",easing:{mass:1,stiffness:600,damping:15}},GENTLE:{type:"gentle",curveType:"spring",easing:{mass:1,stiffness:100,damping:15}},QUICK:{type:"quick",curveType:"spring",easing:{mass:1,stiffness:300,damping:20}},SLOW:{type:"slow",curveType:"spring",easing:{mass:1,stiffness:80,damping:20}}},V=e=>{var t;if("type"in e&&void 0!==F[e.type])return"CUSTOM_CUBIC_BEZIER"===e.type&&(F.CUSTOM_CUBIC_BEZIER.easing={x1:e.easingFunctionCubicBezier.x1,y1:e.easingFunctionCubicBezier.y1,x2:e.easingFunctionCubicBezier.x2,y2:e.easingFunctionCubicBezier.y2}),"CUSTOM_SPRING"===e.type&&(F.CUSTOM_SPRING.easing={mass:e.easingFunctionSpring.mass,stiffness:e.easingFunctionSpring.stiffness,damping:e.easingFunctionSpring.damping}),{easingType:{value:F[e.type].type,type:"string"},easingCurveType:{value:F[e.type].curveType,type:"string"},easingFunction:(t=F[e.type],"spring"===t.curveType?{mass:{value:t.easing.mass,type:"number"},stiffness:{value:t.easing.stiffness,type:"number"},damping:{value:t.easing.damping,type:"number"}}:"cubicBezier"===t.curveType?{x1:{value:t.easing.x1,type:"number"},x2:{value:t.easing.x2,type:"number"},y1:{value:t.easing.y1,type:"number"},y2:{value:t.easing.y2,type:"number"}}:void 0)}},H=e=>{var t;const n=Object.keys(F);return!!(e.reactions.length>0&&"NODE"===(null===(t=e.reactions[0].action)||void 0===t?void 0:t.type)&&null!==e.reactions[0].action.transition&&n.includes(e.reactions[0].action.transition.easing.type))},Z=(e,n)=>e.filter(K(n)).filter(H).map(e=>({name:e.name,category:"motion",exportKey:b,description:e.description||null,values:Object.assign(Object.assign({transitionType:{value:e.reactions[0].action.transition.type.toLocaleLowerCase(),type:"string"},duration:{value:Math.round(1e3*(e.reactions[0].action.transition.duration+Number.EPSILON))/1e3,unit:"s",type:"number"}},V(e.reactions[0].action.transition.easing)),$(e.reactions[0].action.transition)),extensions:{[t.key.extensionPluginData]:{exportKey:b}}})),J=(e,n)=>e.filter(K(n)).map(e=>({name:e.name,category:"spacing",exportKey:x,description:e.description||null,values:{top:{value:k(e.paddingTop,2),unit:"pixel",type:"number"},right:{value:k(e.paddingRight,2),unit:"pixel",type:"number"},bottom:{value:k(e.paddingBottom,2),unit:"pixel",type:"number"},left:{value:k(e.paddingLeft,2),unit:"pixel",type:"number"}},extensions:{[t.key.extensionPluginData]:{exportKey:x}}})),W={MITER:"miter",BEVEL:"bevel",ROUND:"round"},Y={CENTER:"center",INSIDE:"inside",OUTSIDE:"outside"},q=(e,n)=>e.filter(K(n)).filter(e=>e.strokes.length>0).map(e=>({name:e.name,category:"border",exportKey:g,description:e.description||null,values:{strokeAlign:{value:Y[e.strokeAlign],type:"string"},dashPattern:{value:[...void 0!==e.dashPattern&&e.dashPattern.length>0?e.dashPattern:[0,0]],type:"string"},strokeCap:{value:"string"==typeof e.strokeCap?e.strokeCap.toLowerCase():"mixed",type:"string"},strokeJoin:{value:W[e.strokeJoin],type:"string"},strokeMiterLimit:{value:k(e.strokeMiterLimit),unit:"degree",type:"number"},strokeWeight:{value:e.strokeWeight,unit:"pixel",type:"number"},stroke:{value:e.strokes[0],type:"color"}},extensions:{[t.key.extensionPluginData]:{exportKey:g}}})),Q=(e,n)=>{const i=e=>({topLeft:{value:e.topLeftRadius||0,unit:"pixel",type:"number"},topRight:{value:e.topRightRadius||0,unit:"pixel",type:"number"},bottomRight:{value:e.bottomRightRadius||0,unit:"pixel",type:"number"},bottomLeft:{value:e.bottomLeftRadius||0,unit:"pixel",type:"number"}});return e.filter(K(n)).map(e=>{return{name:e.name,category:"radius",exportKey:m,description:e.description||null,values:Object.assign(Object.assign({},"number"==typeof e.cornerRadius&&{radius:{value:e.cornerRadius,unit:"pixel",type:"number"}}),{radiusType:{value:(n=e.cornerRadius,"number"==typeof n?"single":"mixed"),type:"string"},radii:i(e),smoothing:{value:k(e.cornerSmoothing,2),comment:"Percent as decimal from 0.0 - 1.0",type:"number"}}),extensions:{[t.key.extensionPluginData]:{exportKey:m}}};var n})},X=(e,n)=>e.filter(K(n)).map(e=>({name:e.name,category:"breakpoint",exportKey:y,description:e.description||null,values:{width:{value:k(e.width,2),unit:"pixel",type:"number"},height:{value:k(e.height,2),unit:"pixel",type:"number"}},extensions:{[t.key.extensionPluginData]:{exportKey:y}}})),ee=(e,n)=>e.filter(K(n)).map(e=>({name:e.name,category:"opacity",exportKey:h,description:e.description||null,values:{opacity:{value:k(e.opacity,2),type:"number"}},extensions:{[t.key.extensionPluginData]:{exportKey:h}}})),te=(e,n)=>!(e=>[...t.exclusionPrefixDefault,...e])(n).includes(e.name.trim().substr(0,1)),ne=e=>{const t=[];return e.forEach(e=>{t.push({name:e.name,id:e.id,description:e.description,paints:e.paints})}),t},ie=e=>{const t=[];return e.forEach(e=>{t.push({name:e.name,id:e.id,description:e.description,layoutGrids:e.layoutGrids})}),t},oe=e=>{var t,n;return{name:e.name,description:e.description||void 0,bottomLeftRadius:e.bottomLeftRadius,bottomRightRadius:e.bottomRightRadius,topLeftRadius:e.topLeftRadius,topRightRadius:e.topRightRadius,cornerRadius:e.cornerRadius||void 0,cornerSmoothing:e.cornerSmoothing,strokes:(n=e.strokes,[...n].map(e=>E(e)).filter(e=>null!=e)),strokeWeight:e.strokeWeight,strokeStyleId:e.strokeStyleId,strokeMiterLimit:e.strokeMiterLimit,strokeJoin:e.strokeJoin,strokeCap:e.strokeCap,dashPattern:e.dashPattern,strokeAlign:e.strokeAlign,width:e.width,height:e.height,reactions:e.reactions||void 0,paddingTop:e.paddingTop||0,paddingRight:e.paddingRight||0,paddingBottom:e.paddingBottom||0,paddingLeft:e.paddingLeft||0,opacity:null!==(t=e.opacity)&&void 0!==t?t:1}},ae=["COMPONENT","COMPONENT_SET","RECTANGLE","FRAME"],re={}.Object===Object&&{};var se="object"==typeof self&&self&&self.Object===Object&&self;const le=(re||se||Function("return this")()).Symbol,ue=Array.isArray;var ce=Object.prototype,pe=ce.hasOwnProperty,de=ce.toString,fe=le?le.toStringTag:void 0;var ge=Object.prototype.toString;var ye=le?le.toStringTag:void 0;const me=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ye&&ye in Object(e)?function(e){var t=pe.call(e,fe),n=e[fe];try{e[fe]=void 0;var i=!0}catch(e){}var o=de.call(e);return i&&(t?e[fe]=n:delete e[fe]),o}(e):function(e){return ge.call(e)}(e)};var ve=le?le.prototype:void 0,xe=ve?ve.toString:void 0;const be=function e(t){if("string"==typeof t)return t;if(ue(t))return function(e,t){for(var n=-1,i=null==e?0:e.length,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}(t,e)+"";if(function(e){return"symbol"==typeof e||function(e){return null!=e&&"object"==typeof e}(e)&&"[object Symbol]"==me(e)}(t))return xe?xe.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},he=function(e){return null==e?"":be(e)},Se=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:function(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(o);++i<o;)a[i]=e[i+t];return a}(e,t,n)};var ke=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const Ae=function(e){return ke.test(e)};var Ee="\\ud800-\\udfff",Oe="["+Ee+"]",Ie="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Re="\\ud83c[\\udffb-\\udfff]",Te="[^"+Ee+"]",we="(?:\\ud83c[\\udde6-\\uddff]){2}",Le="[\\ud800-\\udbff][\\udc00-\\udfff]",Ne="(?:"+Ie+"|"+Re+")?",Ce="[\\ufe0e\\ufe0f]?",De=Ce+Ne+"(?:\\u200d(?:"+[Te,we,Le].join("|")+")"+Ce+Ne+")*",Pe="(?:"+[Te+Ie+"?",Ie,we,Le,Oe].join("|")+")",je=RegExp(Re+"(?="+Re+")|"+Pe+De,"g");const _e=function(e){return Ae(e)?function(e){return e.match(je)||[]}(e):function(e){return e.split("")}(e)},Me=function(e){e=he(e);var t=Ae(e)?_e(e):void 0,n=t?t[0]:e.charAt(0),i=t?Se(t,1).join(""):e.slice(1);return n.toUpperCase()+i},ze=(Be={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},function(e){return null==Be?void 0:Be[e]});var Be,Ue=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ge=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var Ke=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var $e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var Fe="\\ud800-\\udfff",Ve="\\u2700-\\u27bf",He="a-z\\xdf-\\xf6\\xf8-\\xff",Ze="A-Z\\xc0-\\xd6\\xd8-\\xde",Je="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",We="["+Je+"]",Ye="\\d+",qe="["+Ve+"]",Qe="["+He+"]",Xe="[^"+Fe+Je+Ye+Ve+He+Ze+"]",et="(?:\\ud83c[\\udde6-\\uddff]){2}",tt="[\\ud800-\\udbff][\\udc00-\\udfff]",nt="["+Ze+"]",it="(?:"+Qe+"|"+Xe+")",ot="(?:"+nt+"|"+Xe+")",at="(?:['’](?:d|ll|m|re|s|t|ve))?",rt="(?:['’](?:D|LL|M|RE|S|T|VE))?",st="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",lt="[\\ufe0e\\ufe0f]?",ut=lt+st+"(?:\\u200d(?:"+["[^"+Fe+"]",et,tt].join("|")+")"+lt+st+")*",ct="(?:"+[qe,et,tt].join("|")+")"+ut,pt=RegExp([nt+"?"+Qe+"+"+at+"(?="+[We,nt,"$"].join("|")+")",ot+"+"+rt+"(?="+[We,nt+it,"$"].join("|")+")",nt+"?"+it+"+"+at,nt+"+"+rt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ye,ct].join("|"),"g");const dt=function(e,t,n){return e=he(e),void 0===(t=n?void 0:t)?function(e){return $e.test(e)}(e)?function(e){return e.match(pt)||[]}(e):function(e){return e.match(Ke)||[]}(e):e.match(t)||[]};var ft=RegExp("['’]","g");const gt=(mt=function(e,t,n){return t=t.toLowerCase(),e+(n?Me(he(t).toLowerCase()):t)},function(e){return function(e,t,n,i){var o=-1,a=null==e?0:e.length;for(i&&a&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e);return n}(dt(function(e){return(e=he(e))&&e.replace(Ue,ze).replace(Ge,"")}(e).replace(ft,"")),mt,"")}),yt=e=>{var t,n,i;let o=(null===(n=null==(e=null===(t=null==e?void 0:e.trim)||void 0===t?void 0:t.call(e))?void 0:e.includes)||void 0===n?void 0:n.call(e,"{"))?e:gt(e);return(null===(i=e.match(/^[^a-zA-Z가-힣]/g))||void 0===i?void 0:i.length)&&(console.log("@@string",e),o=e),e.startsWith("-")&&(console.log("@@string",e),o=`.${e.slice(1)}`),o=o.replaceAll("\b","").trim(),((e,t,n)=>{if("string"==typeof e&&""!==e)return e;throw new Error(`converting "${t}" to ${n}, resulting in "${e}"`)})(o,e,"camelCase")};var mt;const vt=e=>{return t=void 0,n=void 0,o=function*(){return yield figma.loadAllPagesAsync(),[...e.map(e=>e.findChildren(e=>(e=>"FRAME"===e.type&&"_tokens"===yt(e.name.trim()).substr(0,7))(e))).reduce((e,t)=>[...e,...t])].map(e=>e.findAll(e=>(e=>"COMPONENT_SET"!==e.parent.type&&ae.includes(e.type)&&e.name.length>0)(e))).reduce((e,t)=>[...e,...t],[]).map(e=>("RECTANGLE"!==e.type&&"FRAME"!==e.type||console.warn("Please use only main components and variants, other types may be deprecated as tokens in the future"),"COMPONENT_SET"===e.type?e.children.map(t=>{return Object.assign(Object.assign({},oe(t)),{name:(n=e.name,i=t.name,`${n}/${i=i.split(",").filter(e=>!["_","."].includes(e.trim().substr(0,1))).map(e=>e.split("=")[1]).join("/")}`)});var n,i}):[oe(e)])).reduce((e,t)=>[...e,...t],[])},new((i=void 0)||(i=Promise))(function(e,a){function r(e){try{l(o.next(e))}catch(e){a(e)}}function s(e){try{l(o.throw(e))}catch(e){a(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i(function(e){e(n)})).then(r,s)}l((o=o.apply(t,n||[])).next())});var t,n,i,o},xt=e=>{const t=[];return e.forEach(e=>{t.push({name:e.name,id:e.id,description:e.description,fontSize:e.fontSize,textDecoration:e.textDecoration,fontName:e.fontName,letterSpacing:e.letterSpacing,lineHeight:e.lineHeight,paragraphIndent:e.paragraphIndent,paragraphSpacing:e.paragraphSpacing,textCase:e.textCase})}),t},bt=e=>{const t=[];return e.forEach(e=>{t.push({name:e.name,id:e.id,description:e.description,effects:e.effects})}),t};const ht=(e,t)=>{return n=void 0,i=void 0,a=function*(){const n=yield vt([...e.root.children]),i=t.exclusionPrefix.split(",").map(e=>e.replace(/\s+/g,""));return{tokenFrames:n,paintStyles:ne(yield e.getLocalPaintStylesAsync()).filter(e=>te(e,i)),gridStyles:ie(yield e.getLocalGridStylesAsync()).filter(e=>te(e,i)),textStyles:xt(yield e.getLocalTextStylesAsync()).filter(e=>te(e,i)),effectStyles:bt(yield e.getLocalEffectStylesAsync()).filter(e=>te(e,i))}},new((o=void 0)||(o=Promise))(function(e,t){function r(e){try{l(a.next(e))}catch(e){t(e)}}function s(e){try{l(a.throw(e))}catch(e){t(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o(function(e){e(n)})).then(r,s)}l((a=a.apply(n,i||[])).next())});var n,i,o,a},St=e=>"boolean"==typeof e?"string":"number"==typeof e?"dimension":"object"==typeof e?"color":"string"==typeof e?"string":void 0,kt=(e,t="/",n=".")=>e.split(t).map(e=>yt(e)).join(n);const At=function(e,t,n,i=!1){return o=this,a=void 0,s=function*(){const o=yield figma.variables.getVariableByIdAsync(t.id),a=yield figma.variables.getVariableCollectionByIdAsync(o.variableCollectionId);return{description:e.description||"",exportKey:S,category:St(Object.values(o.valuesByMode)[0]),values:`{${yt(a.name)}.${kt(o.name,"/",".")}}`,aliasCollectionName:yt(a.name),aliasMode:n,aliasSameMode:e.aliasSameMode||i}},new((r=void 0)||(r=Promise))(function(e,t){function n(e){try{l(s.next(e))}catch(e){t(e)}}function i(e){try{l(s.throw(e))}catch(e){t(e)}}function l(t){var o;t.done?e(t.value):(o=t.value,o instanceof r?o:new r(function(e){e(o)})).then(n,i)}l((s=s.apply(o,a||[])).next())});var o,a,r,s},Et=e=>e.reduce((e,t)=>{if(!t.aliasMode)return e.push(t),e;const{aliasMode:n,aliasCollectionName:i}=t;return e.push(Object.assign(Object.assign({},t),{values:t.values.replace(`{${i}.`,`{${i}.${yt(n.name)}.`)})),e},[]),Ot=(e,t)=>{const n=e=>e&&"object"==typeof e;return n(e)&&n(t)?(Object.keys(t).forEach(i=>{const o=e[i],a=t[i];Array.isArray(o)&&Array.isArray(a)?e[i]=[...new Set(o.concat(a))]:n(o)&&n(a)?e[i]=Ot(Object.assign({},o),a):e[i]=a}),e):t},It=Ot;var Rt=function(e,t,n,i){return new(n||(n=Promise))(function(o,a){function r(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}l((i=i.apply(e,t||[])).next())})};const Tt=(e,t)=>{var n;let i={};return t&&(null===(n=null==e?void 0:e.modes)||void 0===n||n.forEach(n=>{var o;const a=t.valuesByMode[n.modeId];null===(o=e.variableIds)||void 0===o||o.forEach(e=>Rt(void 0,void 0,void 0,function*(){const o=yield figma.variables.getVariableByIdAsync(e);o&&a&&"object"==typeof a&&t.name!==o.name&&a.id===o.id&&(i=At(t,a,n,!0))}))})),It(t,i)},wt=(e,n)=>Rt(void 0,void 0,void 0,function*(){var i;const o=yield e.variables.getLocalVariableCollectionsAsync(),a=yield e.variables.getLocalVariablesAsync(),r=null==o?void 0:o.filter(e=>![".","_",...n.exclusionPrefix.split(",")].includes(e.name.charAt(0))).map(e=>e.id),s=o?Object.fromEntries(null==o?void 0:o.map(e=>[e.id,e])):[],l=yield Promise.all((null===(i=null==a?void 0:a.filter(e=>r.includes(e.variableCollectionId)))||void 0===i?void 0:i.map(e=>Rt(void 0,void 0,void 0,function*(){var i;const{variableCollectionId:o}=e,{name:a,modes:r}=s[o];return n.resolveSameCollectionOrModeReference&&(e=Tt(s[o],e)),yield Promise.all(null===(i=Object.entries(e.valuesByMode))||void 0===i?void 0:i.map(([i,o])=>Rt(void 0,void 0,void 0,function*(){const s=n.modeInTokenName&&r.length>1,l=r.find(({modeId:e})=>e===i),u=`${a}/${e.name}`,c=`${a}/${l.name}/${e.name}`,p=yield((e,t,n)=>Rt(void 0,void 0,void 0,function*(){let i="color",o={};if("VARIABLE_ALIAS"===t.type)return yield At(e,t,n);switch(e.resolvedType){case"COLOR":i="color",o={fill:{value:A(t),type:"color",blendMode:"normal"}};break;case"FLOAT":i="dimension",o=k(t,2);break;case"STRING":i="string",o=t;break;case"BOOLEAN":i="boolean",o=t}return{name:e.name,description:e.description||void 0,exportKey:S,category:i,values:o}}))(e,o,l);return Object.assign(Object.assign({},p),{name:s?c:u,extensions:{[t.key.extensionPluginData]:{mode:n.modeInTokenValue?l.name:void 0,collection:a,scopes:e.scopes,[t.key.extensionVariableStyleId]:e.id,exportKey:S}}})})))})))||[]);return n.modeInTokenValue?Et(l.flat()):l.flat().map(e=>(null==e?void 0:e.aliasSameMode)?Et([e]):e).flat()});const Lt=(e="")=>e.split(",").map(e=>e.replace(/\s+/g,""));var Nt=function(e,t,n,i){return new(n||(n=Promise))(function(o,a){function r(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}l((i=i.apply(e,t||[])).next())})};figma.showUI(__html__,{themeColors:!0,visible:!1}),[a.export,a.urlExport,a.generalSettings].includes(figma.command)&&Nt(void 0,void 0,void 0,function*(){const r=(()=>{let n=figma.root.getPluginData(t.key.settings);if(""===n)return e;n=JSON.parse(n);const o=i(e,n);return o.prefix=i(e.prefix,o.prefix),o.exports=i(e.exports,o.exports),o})(),u=yield s(figma);figma.ui.resize(t.ui[figma.command].width,t.ui[figma.command].height),void 0!==u&&"patch"!==u&&figma.ui.resize(t.ui[figma.command].width,t.ui[figma.command].height+60);const c={command:figma.command,payload:{settings:Object.assign(Object.assign({},r),{accessToken:yield(p=l(figma),o(void 0,void 0,void 0,function*(){const e=yield figma.clientStorage.getAsync("accessTokens");return void 0!==e&&e instanceof Object&&e[p]||""}))}),data:null,versionDifference:u,metadata:{filename:figma.root.name}}};var p;[a.export,a.urlExport].includes(figma.command)&&(c.payload.data=n(yield((e,n)=>{return i=void 0,o=void 0,r=function*(){const i=yield ht(e,n);return[...(o=i.tokenFrames,a=Lt(n.prefix.size),o.filter(K(a)).map(e=>({name:e.name,category:"size",exportKey:v,description:e.description||null,values:{width:{value:k(e.width,2),unit:"pixel",type:"number"},height:{value:k(e.height,2),unit:"pixel",type:"number"}},extensions:{[t.key.extensionPluginData]:{exportKey:v}}}))),...X(i.tokenFrames,Lt(n.prefix.breakpoint)),...J(i.tokenFrames,Lt(n.prefix.spacing)),...q(i.tokenFrames,Lt(n.prefix.border)),...Q(i.tokenFrames,Lt(n.prefix.radius)),...Z(i.tokenFrames,Lt(n.prefix.motion)),...ee(i.tokenFrames,Lt(n.prefix.opacity)),...w(i.paintStyles,{color:Lt(n.prefix.color),gradient:Lt(n.prefix.gradient),alias:Lt(n.alias)}),...L(i.gridStyles,Lt(n.prefix.grid)),...B(i.textStyles,Lt(n.prefix.font)),...G(i.effectStyles,Lt(n.prefix.effect)),...yield wt(e,n)];var o,a},new((a=void 0)||(a=Promise))(function(e,t){function n(e){try{l(r.next(e))}catch(e){t(e)}}function s(e){try{l(r.throw(e))}catch(e){t(e)}}function l(t){var i;t.done?e(t.value):(i=t.value,i instanceof a?i:new a(function(e){e(i)})).then(n,s)}l((r=r.apply(i,o||[])).next())});var i,o,a,r})(figma,r))),figma.ui.postMessage(Object.assign({},c)),figma.ui.show()}),figma.command===a.help&&figma.ui.postMessage({command:a.help,payload:{url:"https://github.com/lukasoppermann/design-tokens"}}),figma.command===a.demo&&figma.ui.postMessage({command:a.demo,payload:{url:"https://www.figma.com/file/2MQ759R5kJtzQn4qSHuqR7/Design-Tokens-for-Figma?node-id=231%3A2"}}),figma.command===a.reset&&(figma.root.setPluginData(t.key.settings,n(e)),figma.notify("⚙️ Settings have been reset."),figma.closePlugin()),figma.ui.onmessage=i=>Nt(void 0,void 0,void 0,function*(){const{command:r,payload:s}=i;var u,c,p;r===a.closePlugin&&(void 0!==(null==s?void 0:s.notification)&&""!==(null==s?void 0:s.notification)&&figma.notify(s.notification),figma.ui.hide(),figma.closePlugin()),r===a.saveSettings&&(p=s.settings,p=Object.assign(Object.assign({},e),p),figma.root.setPluginData(t.key.settings,n(p)),yield(u=l(figma),c=s.accessToken,o(void 0,void 0,void 0,function*(){const e=(yield figma.clientStorage.getAsync("accessTokens"))||{},t=Object.assign(Object.assign({},e),{[u]:c});return yield figma.clientStorage.setAsync("accessTokens",t)})),s.closePlugin&&!0===s.closePlugin&&figma.closePlugin())})})();